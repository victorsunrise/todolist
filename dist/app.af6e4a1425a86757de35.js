webpackJsonp([4],{60:function(e,t,n){"use strict";(function(e){function r(){c((p.cachedIds.top||[]).slice(0,30)),setTimeout(r,9e5)}function o(e){f&&console.log("fetching "+e+"...");var t=p.cachedItems;return t&&t.has(e)?(f&&console.log("cache hit for "+e+"."),Promise.resolve(t.get(e))):new Promise(function(n,r){p.child(e).once("value",function(r){var o=r.val();o&&(o.__lastUpdated=Date.now()),t&&t.set(e,o),f&&console.log("fetched "+e+"."),n(o)},r)})}function i(e){return p.cachedIds&&p.cachedIds[e]?Promise.resolve(p.cachedIds[e]):o(e+"stories")}function a(e){return o("item/"+e)}function c(e){return Promise.all(e.map(function(e){return a(e)}))}function s(e){return o("user/"+e)}t.a=i,t.b=c,t.c=s;var u=n(68),f=!!e.env.DEBUG_API,p=Object(u.a)({version:"/v0",config:{databaseURL:"https://hacker-news.firebaseio.com"}});p.onServer&&r()}).call(t,n(21))},61:function(e,t,n){"use strict";function r(e){n(65)}function o(){return new h.a.Store({state:{activeType:null,itemsPerPage:20,items:{},users:{},lists:{top:[],new:[],show:[],ask:[],job:[]}},actions:T,mutations:_,getters:E})}function i(){return new I.a({mode:"history",fallback:!1,scrollBehavior:function(){return{y:0}},routes:[{path:"/top/:page(\\d+)?",component:S("top")},{path:"/new/:page(\\d+)?",component:S("new")},{path:"/show/:page(\\d+)?",component:S("show")},{path:"/ask/:page(\\d+)?",component:S("ask")},{path:"/job/:page(\\d+)?",component:S("job")},{path:"/item/:id(\\d+)",component:g},{path:"/user/:id",component:b},{path:"/",redirect:"/top"}]})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),c=(n(63),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{staticClass:"view"})],1)],1)}),s=[],u={render:c,staticRenderFns:s},f=u,p=n(59),l=r,d=p(null,f,!1,l,null,null),v=d.exports,h=n(67),m=n(60),T={FETCH_LIST_DATA:function(e,t){var n=e.commit,r=e.dispatch,o=(e.state,t.type);return n("SET_ACTIVE_TYPE",{type:o}),Object(m.a)(o).then(function(e){return n("SET_LIST",{type:o,ids:e})}).then(function(){return r("ENSURE_ACTIVE_ITEMS")})},ENSURE_ACTIVE_ITEMS:function(e){return(0,e.dispatch)("FETCH_ITEMS",{ids:e.getters.activeIds})},FETCH_ITEMS:function(e,t){var n=e.commit,r=e.state,o=t.ids,i=Date.now();return o=o.filter(function(e){var t=r.items[e];return!t||i-t.__lastUpdated>18e4}),o.length?Object(m.b)(o).then(function(e){return n("SET_ITEMS",{items:e})}):Promise.resolve()},FETCH_USER:function(e,t){var n=e.commit,r=e.state,o=t.id;return r.users[o]?Promise.resolve(r.users[o]):Object(m.c)(o).then(function(e){return n("SET_USER",{id:o,user:e})})}},_={SET_ACTIVE_TYPE:function(e,t){var n=t.type;e.activeType=n},SET_LIST:function(e,t){var n=t.type,r=t.ids;e.lists[n]=r},SET_ITEMS:function(e,t){t.items.forEach(function(t){t&&a.a.set(e.items,t.id,t)})},SET_USER:function(e,t){var n=t.id,r=t.user;a.a.set(e.users,n,r||!1)}},E={activeIds:function(e){var t=e.activeType,n=e.itemsPerPage,r=e.lists;if(!t)return[];var o=Number(e.route.params.page)||1,i=(o-1)*n,a=o*n;return r[t].slice(i,a)},activeItems:function(e,t){return t.activeIds.map(function(t){return e.items[t]}).filter(function(e){return e})}};a.a.use(h.a);var I=n(121);a.a.use(I.a);var S=function(e){return function(){return n.e(0).then(n.bind(null,134)).then(function(t){return t.default(e)})}},g=function(){return n.e(2).then(n.bind(null,135))},b=function(){return n.e(1).then(n.bind(null,136))},w=n(122);a.a.mixin({beforeRouteUpdate:function(e,t,n){var r=this.$options.asyncData;r?r({store:this.$store,route:e}).then(n).catch(n):n()}});var y=function(){var e=o(),t=i();return Object(w.sync)(e,t),{app:new a.a({router:t,store:e,render:function(e){return e(v)}}),router:t,store:e}}(),P=y.app,A=y.router,C=y.store;window.__INITIAL_STATE__&&C.replaceState(window.__INITIAL_STATE__),A.onReady(function(){A.beforeResolve(function(e,t,n){var r=A.getMatchedComponents(e),o=A.getMatchedComponents(t),i=!1,a=r.filter(function(e,t){return i||(i=o[t]!==e)}),c=a.map(function(e){return e.asyncData}).filter(function(e){return e});if(!c.length)return n();Promise.all(c.map(function(t){return t({store:C,route:e})})).then(function(){n()}).catch(n)}),P.$mount("#app")}),"https:"===location.protocol&&navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js")},65:function(e,t){},68:function(e,t,n){"use strict";function r(e){var t=e.config,n=e.version;return i.a.initializeApp(t),i.a.database().ref(n)}t.a=r;var o=n(69),i=n.n(o),a=n(86);n.n(a)}},[61]);